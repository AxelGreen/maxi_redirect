# set custome 404 page contents
ErrorDocument 404 'Not found'

# disable acceess to index.php
RewriteRule ^index\.php$ - [R=404,L]

# handle open requests
RewriteCond %{HTTP_HOST} ^[a-z0-9]{0,29}\.esthandler\.com$
RewriteRule ^open/.gif index.php?action=open [END]

# handle click requests
RewriteCond %{HTTP_HOST} ^[a-z]{1}[a-z0-9\-]{0,29}\.esthandler\.com$
RewriteRule ^(click|approve|decline)/([a-zA-Z0-9]{3,})/([a-zA-Z0-9]{3,})/([^\/]{3,})/([a-f0-9]{40})$ index.php?action=$1&queue_id=$2&send_id=$3&link=$4&hash=$5 [END]